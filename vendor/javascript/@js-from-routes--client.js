// @js-from-routes/client@1.0.4 downloaded from https://ga.jspm.io/npm:@js-from-routes/client@1.0.4/dist/index.js

import{deepConvertKeys as e,camelCase as r,snakeCase as t,formatUrl as a}from"@js-from-routes/core";var n=Object.defineProperty;var s=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty;var c=Object.prototype.propertyIsEnumerable;var __defNormalProp=(e,r,t)=>r in e?n(e,r,{enumerable:true,configurable:true,writable:true,value:t}):e[r]=t;var __spreadValues=(e,r)=>{for(var t in r||(r={}))o.call(r,t)&&__defNormalProp(e,t,r[t]);if(s)for(var t of s(r))c.call(r,t)&&__defNormalProp(e,t,r[t]);return e};var __objRest=(e,r)=>{var t={};for(var a in e)o.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&s)for(var a of s(e))r.indexOf(a)<0&&c.call(e,a)&&(t[a]=e[a]);return t};var i={baseUrl:"",deserializeData:t=>e(t,r),serializeData:r=>e(r,t),csrfToken:"",getCSRFToken(){var e;return i.csrfToken||(null==(e=document.querySelector("meta[name=csrf-token]"))?void 0:e.content)},async fetch(e){const r=e,{url:t,data:a,responseAs:n}=r,s=__objRest(r,["url","data","responseAs"]);const o=__spreadValues({body:void 0===a?a:JSON.stringify(a),credentials:"include",redirect:"follow"},s);return fetch(t,o).then((async e=>{if(e.status>=200&&e.status<300)return e;throw await i.unwrapResponseError(e,n)})).catch(i.onResponseError)},headers(e){const r=i.getCSRFToken();return __spreadValues({Accept:"application/json","Content-Type":"application/json"},r?{"X-CSRF-Token":r}:{})},modifyRequest(e){return e},async onResponseError(e){throw e},async unwrapResponse(e,r){i.withResponse(e);return"response"===r?e:204===e.status?null:await e[r]().catch((()=>null))},async unwrapResponseError(e,r){const t=new Error(e.statusText);t.response=e;try{const a=await i.unwrapResponse(e,r);t.body="json"===r?i.deserializeData(a):a}catch{}return t},withResponse(e){const r=e.headers||{};const t="get"in r?r.get("x-csrf-token"):r["x-csrf-token"];t&&(i.csrfToken=t)}};function definePathHelper(e,r){const helper=t=>request(e,r,t);helper.path=e=>formatUrl(r,e);helper.pathTemplate=r;helper.httpMethod=e;return helper}function formatUrl(e,r={}){let t=e.startsWith("/")?i.baseUrl:"";t.endsWith("/")&&(t=t.slice(0,t.length-1));return a(`${t}${e}`,r)}async function request(e,r,t={}){const{data:a,deserializeData:n=i.deserializeData,fetch:s=i.fetch,fetchOptions:o,headers:c,params:l=t.data||t,responseAs:u="json",serializeData:p=i.serializeData}=t;const f=(t.method||e).toUpperCase();if(a&&("HEAD"===f||"GET"===f))throw Object.assign(new Error("Request with GET/HEAD method cannot have data."),{data:a});r=formatUrl(r,l);const d=__spreadValues({method:f,url:r,data:p(a),responseAs:u,headers:__spreadValues(__spreadValues({},i.headers({method:f,url:r,options:t})),c)},o);return s(i.modifyRequest(d)||d).then((async e=>await i.unwrapResponse(e,u))).then((e=>"json"===u?n(e):e))}export{i as Config,definePathHelper,formatUrl,request};

